function init ({ onBroadcast }) {
  function onRead (cb) {
    if (typeof cb !== 'function') {
      cb = () => {}
      console.log('WARN', 'must provide function to notification.onRead')
    }
    onBroadcast('notification::read', message => {
      message.data.userId = message.headers.userId
      cb(message)
    })
  }

  return onRead
}

module.exports = init
