const sendMessage = require('./send-message')
const onMessage = require('./on-message')
const _broadcast = require('./broadcast')
const onCommand = require('./on-command')

function init (deps) {
  const broadcast = _broadcast(deps)
  return {
    onCommand: onCommand({ broadcast, ...deps }),
    broadcast,
    sendMessage: sendMessage(deps),
    onMessage: onMessage(deps)
  }
}

module.exports = init
