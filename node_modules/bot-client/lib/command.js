function initCommand (socket, timeout = 10000) {
  function command (teamId, route, data) {
    return new Promise((resolve, reject) => {
      socket.emit(route, teamId, {...data, timeout}, response => {
        if (response.code !== 200 && response.status !== 200) {
          const err = new Error()
          err.message = response.message || response.error
          err.code = response.code
          reject(err)
        }
        resolve(response)
      })
    })
  }

  return command
}
module.exports = initCommand
