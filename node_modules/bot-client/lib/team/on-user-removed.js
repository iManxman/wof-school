function init ({ loginInfo, onBroadcast }) {
  function onUserRemoved (opts, cb) {
    if (typeof opts === 'function') {
      cb = opts
      opts = {}
    }
    const { self } = opts || {}
    if (typeof cb !== 'function') {
      cb = () => {}
      console.log('WARN', 'must provide function to team onUserRemoved')
    }
    onBroadcast('team::user-removed', message => {
      const userId = loginInfo.getUserId(message.teamId)

      if (self && message.data.userId !== userId) {
        return
      }

      cb(message)
    })
  }

  return onUserRemoved
}
module.exports = init
