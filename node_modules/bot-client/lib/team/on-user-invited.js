function init ({ loginInfo, onBroadcast }) {
  function onUserInvited (opts, cb) {
    if (typeof opts === 'function') {
      cb = opts
      opts = {}
    }
    const { self } = opts || {}
    if (typeof cb !== 'function') {
      cb = () => {}
      console.log('WARN', 'must provide function to team onUserInvited')
    }
    onBroadcast('team::user-invited', message => {
      const userId = loginInfo.getUserId(message.teamId)
      if (self && message.data.userId !== userId) {
        return
      }

      cb(message)
    })
  }

  return onUserInvited
}
module.exports = init
