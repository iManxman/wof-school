function init ({ onBroadcast }) {
  function onUserDeleted (cb) {
    if (typeof cb !== 'function') {
      cb = () => {}
      console.log('WARN', 'must provide function to stream onUserDeleted')
    }
    onBroadcast('stream::updated', message => {
      if (message.data.type !== 'deleteStreamRole') {
        return
      }
      cb(message)
    })
  }
  return onUserDeleted
}

module.exports = init
