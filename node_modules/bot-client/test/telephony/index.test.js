/* global test, expect */
const { promisify } = require('util')
const { resolve } = require('path')
let { readdir } = require('fs')
const telephony = require('../../lib/telephony')
const getMethodsFromFiles = require('../transform')

const libPath = resolve(__dirname, '../../lib/telephony')
readdir = promisify(readdir)

test('[TELEPHONY] returns correct current api', async () => {
  const files = await readdir(libPath)
  const methods = getMethodsFromFiles(files)
  const telephonyApi = Object.keys(telephony({})).sort()
  expect(telephonyApi).toEqual(methods)
})
