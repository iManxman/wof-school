/* global test, expect */
const lib = require('../lib')
const { promisify } = require('util')
const { resolve } = require('path')
let { readdir } = require('fs')

const libPath = resolve(__dirname, '../lib')
readdir = promisify(readdir)

test('[BOT] returns correct current api', async () => {
  const dirs = await readdir(libPath)
  const expected = dirs.filter(entry => !entry.match(/channel-api/) && !entry.match(/\.js/))
  const api = Object.keys(lib({})).sort()

  expect(api).toEqual(expected)
})
